<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" href="css/themes/mytheme.css"/>
		<link rel="stylesheet" href="css/themes/jquery.mobile.icons.min.css"/>
        <link rel="stylesheet" href="css/jquery.mobile-1.4.5.min.css">
		<link rel="stylesheet" href="css/jquery-ui.css">
		<script src="js/jquery-2.1.4.min.js"></script>
		<script src="js/jquery-ui.js"></script>
		<script src="js/jquery.mobile-1.4.5.min.js"></script>
		<script src="phonegap.js"></script>
		<script>
		$(function(){
			$("#datepicker").datepicker({
				dateFormat:"yy-mm-dd"
			});
		});
		
		function scanBarcode(){
				cordova.plugins.barcodeScanner.scan(
					function (result) {
					$("#captured").val(result.text)
					}, 
					function (error) {
						alert("Scanning failed: " + error);
					}
				);
			}
			
			function submitData(){
				$("#submitData").submit(function(ev){
					ev.preventDefault();
					var read = $("#reading").val();
					var capture = $("#captured").val();
					var dateVal = $("#datepicker").val();
					var loc = $("#location").val();
					var stringVal = "reading="+read+"&captured="+capture+"&date="+dateVal+"&location="+loc;
					//$("#trial").text(stringVal);

					$.ajax({
						type: 'POST',
						url:"insert.php",
						data: stringVal,
						success:function(data){
						$('#message').html("Successfully added");
						 }
					});
					
				});
			}
		</script>
	</head>
		<body>
		
			<!--page content-->
			<div data-role="page" id="pageone">
			<!--header-->
				<div data-role="header" data-position="inline">
					<a href="index.html"class="ui-btn ui-icon-home ui-btn-icon-left">Home</a>
					<h1> Metre Reading</h1>
					<a href="view.html" class="ui-btn-right ui-btn ui-btn-inline ui-mini ui-corner-all ui-btn-icon-left ui-icon-grid">View</a>	
				</div>
				
			<!--content-->
			<div data-role="main" class="ui-content">
			<input type="button" value ="SCAN" id="btnScan" onclick="scanBarcode()">
				<form method="POST" action="insert.php" id="submitData">
					<label for="Reading">Reading:</label>
					<input type="text" name="reading" id="reading">
					<label for="captured">Captured Value:</label>
					<input type="text" name="captured" id="captured" >
					<label for="date">Date: </label>
					<input type="text"name="date" id="datepicker">
					<label for="location">Location:</label>
					<input type="text" name="location" id="location">
					<input type="submit" value="Submit Button"  onclick="submitData()">
			</div>
			
			<!--footer-->
			<div data-role="footer">
				<h1 id="message">  </h1>
				
			</div>
		</body>
</html>
